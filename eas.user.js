// ==UserScript==
// @name         EASx Bypass
// @namespace    eas.v2
// @version      3.4
// @description  Bypass ad-links using the EASx API
// @author       EASx
// @match         *://linkvertise.com/*
// @match         *://mega-guy.com/*
// @match         *://loot-link.com/*
// @match         *://best-links.org/*
// @match         *://loot-links.com/*
// @match         *://megaspremium.com/*
// @match         *://lootdest.com/*
// @match         *://direct-links.net/*
// @match         *://risquemega.com/*
// @match         *://onlyfriends.club/*
// @match         *://onepiecered.co/*
// @match         *://multileaks.com/*
// @match         *://luvsquad-links.com/*
// @match         *://lootdest.org/*
// @match         *://free-leaks.com/*
// @match         *://goldmega.online/*
// @match         *://realiukzemydre.com/*
// @match         *://kmendation.com/*
// @match         *://lootlinks.co/*
// @match         *://onlyshare.info/*
// @match         *://leakplugs.com/*
// @match         *://nswfbox.com/*
// @match         *://eofmukindwo.com/*
// @match         *://op-packs.com/*
// @match         *://thedetective.online/*
// @match         *://forlinkmeg.com/*
// @match         *://thegoatpack.org/*
// @match         *://of-leaks.xyz/*
// @match         *://links.spacebin.in/*
// @match         *://supermeg.com/*
// @match         *://onlyfanessereloaded.com/*
// @match         *://fanzleaks.com/*
// @match         *://cemendemons.com/*
// @match         *://premiummegaz.com/*
// @match         *://thepremium.online/*
// @match         *://pasteebins.com/*
// @match         *://baddiezcentral.com/*
// @match         *://megazone.website/*
// @match         *://leak-pragmatic.com/*
// @match         *://megadumpz.com/*
// @match         *://thhaven.net/*
// @match         *://meg4fans.com/*
// @match         *://depravityweb.co/*
// @match         *://discordlink.cc/*
// @match         *://megashub.co/*
// @match         *://streamergirls.org/*
// @match         *://your-leaks.com/*
// @match         *://onlylinksmegas.xyz/*
// @match         *://pypy.spacebin.in/*
// @match         *://pypy.in/*
// @match         *://luvsquad-links.cmo/*
// @match         *://beast.net.in/*
// @match         *://hook.beast.net.in/*
// @match         *://all-fans.online/*
// @match         *://fansmega.com/*
// @match         *://worldpacks.co/*
// @match         *://night-hub.online/*
// @match         *://dailyofleaks.com/*
// @match         *://pkofs.com/*
// @match         *://offree90.com/*
// @match         *://megadropz.com/*
// @match         *://onlyfunlink.com/*
// @match         *://direct-links.org/*
// @match         *://leaks4you.com/*
// @match         *://onlylinksmegas.com/*
// @match         *://direct-link.net/*
// @match         *://downbadleaks.com/*
// @match         *://onlyfanscloud.com/*
// @match         *://missleakz.com/*
// @match         *://leakszone.online/*
// @match         *://links-loot.com/*
// @match         *://holyfanslinks.com/*
// @match         *://utopianleaks.com/*
// @match         *://megavip.store/*
// @match         *://drlinker.com/*
// @match         *://baddiesheaven.com/*
// @match         *://of4lm-links.com/*
// @match         *://holedonly.store/*
// @match         *://lootlinks.com/*
// @match         *://free-content.pro/*
// @match         *://milky-center.com/*
// @match         *://megaofs.com/*
// @match         *://bleleadersto.com/*
// @match         *://link-target.org/*
// @match         *://daughablelea.com/*
// @match         *://mymegalinks.com/*
// @match         *://heroslut.com/*
// @match         *://tonordersitye.com/*
// @match         *://vip-linknetwork.com/*
// @match         *://birdbiss.com/*
// @match         *://loot-labs.com/*
// @match         *://lootlabs.com/*
// @match         *://link-hub.net/*
// @match         *://locconnect.com/*
// @match         *://premiumstashdrop.com/*
// @match         *://lootdest.info/*
// @match         *://of-area.com/*
// @match         *://link-target.net/*
// @match         *://megalnk.com/*
// @match         *://lootlink.org/*
// @match         *://nsfwcherry.com/*
// @match         *://cherrypacks.online/*
// @match         *://hotstars-leaks.com/*
// @match         *://onlymega.co/*
// @match         *://hanimeturks.com/*
// @match         *://dailyleakz.com/*
// @match         *://content-hub.club/*
// @match         *://dailyadultmegas.com/*
// @match         *://oui-chu.com/*
// @match         *://megalinks.one/*
// @match         *://starleakz.com/*
// @match         *://babeslink.click/*
// @match         *://ofgirls3x.com/*
// @match         *://pnp-drops.me/*
// @match         *://nsfw-paradise.club/*
// @match         *://key-access.co/*
// @match         *://leaksmix.com/*
// @match         *://sensual-leaks.com/*
// @match         *://ofhub-leaks.com/*
// @match         *://onlyforfan.online/*
// @match         *://sweetjuice-mega.com/*
// @match         *://crip-hub.com/*
// @match         *://leaksfreeday.com/*
// @match         *://thotshaven.online/*
// @match         *://mega-leaked.com/*
// @match         *://beautifulgirls.social/*
// @match         *://tavernleaks.com/*
// @match         *://nudeleaksteenz.com/*
// @match         *://slutywet.com/*
// @match         *://leakutopia.site/*
// @match         *://secret-packs.com/*
// @match         *://attiktok22.com/*
// @match         *://pancakes-leaks.com/*
// @match         *://diamond-leaks.com/*
// @match         *://lewd-leaks.com/*
// @match         *://ftbleaks.net/*
// @match         *://thepytheaven.org/*
// @match         *://of-region.online/*
// @match         *://admiregirls-byme.com/*
// @match         *://mzehoney12.com/*
// @match         *://herplace.online/*
// @match         *://megaplugleaks.com/*
// @match         *://of-kingdom.com/*
// @match         *://onlyfansmegafolder.com/*
// @match         *://links.spacebin.in/*
// @match         *://adfoc.us/*
// @match         *://boost.ink/*
// @match         *://cuty.io/*
// @match         *://www.cuty.io/*
// @match         *://cety.app/*
// @match         *://www.cety.app/*
// @match         *://linkvertise.com/*/*
// @match         *://mboost.me/*
// @match         *://bst.gg/*
// @match         *://booo.st/*
// @match         *://mendationforc.info/*
// @match         *://paster.so/*
// @match         *://paster.gg/*
// @match         *://rekonise.com/*
// @match         *://social-unlock.com/*
// @match         *://www.social-unlock.com/*
// @match         *://socialwolvez.com/*
// @match         *://sub2get.com/*
// @match         *://www.sub2get.com/*
// @match         *://sub2unlock.com/*
// @match         *://sub2unlock.io/*
// @match         *://sub2unlock.net/*
// @match         *://sub2unlock.online/*
// @match         *://sub2unlock.top/*
// @match         *://sub4unlock.pro/*
// @match         *://sub4unlock.com/*
// @match         *://sub4unlock.io/*
// @match         *://subfinal.com/*
// @match         *://unlocknow.net/*
// @match         *://v.gd/*
// @match         *://work.ink/*
// @match         *://www.work.ink/*
// @match         *://workink.net/*
// @match         *://r.work.ink/*
// @match         *://workink.one/*
// @match         *://workink.me/*
// @match         *://ytsubme.com/*
// @match         *://www.ytsubme.com/*
// @match         *://esohasl.net/*
// @match         *://rbscripts.net/*
// @match         *://link.rbscripts.net/*
// @downloadURL  https://github.com/XxEASTRxX/userscripts/raw/main/eas.user.js
// @updateURL    https://github.com/XxEASTRxX/userscripts/raw/main/eas.user.js
// @homepageURL  https://eas.lol
// @icon         https://images-ext-1.discordapp.net/external/4eF4ubEGCLKukYCj7MPYZigPNTKl68O77uNmiqxgSJU/%3Fsize%3D4096/https/cdn.discordapp.com/icons/1261620335560626236/07c5fd390f9e2c248ab0361194bfd5e7.png
// @run-at       document-start
// ==/UserScript==

(function() {
    'use strict';

    // Configuration
    const CONFIG = {
        debug: false,
        autoClose: 4000
    };

    // Utility functions
    const Utils = {
        log: (message, type = 'info') => {
            if (CONFIG.debug) console[type](`[EASx] ${message}`);
        },

        isValidUrl: (string) => {
            try {
                new URL(string);
                return true;
            } catch {
                return false;
            }
        },

        copyToClipboard: (text) => {
            try {
                GM_setClipboard(text);
                return true;
            } catch {
                return false;
            }
        }
    };

    // Storage manager
    const Storage = {
        get: (key, defaultValue = null) => {
            try {
                return GM_getValue(key, defaultValue);
            } catch {
                return defaultValue;
            }
        },

        set: (key, value) => {
            try {
                GM_setValue(key, value);
                return true;
            } catch {
                return false;
            }
        }
    };

    // Bypass services configuration
    const BYPASS_SERVICES = {
        'adfly': {
            name: 'AdFly',
            pattern: /adf\.ly|j\.gs/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        },
        'linkvertise': {
            name: 'Linkvertise',
            pattern: /linkvertise\.com/,
            bypass: (url) => `https://thebypasser.com/bypass?url=${encodeURIComponent(url)}`
        },
        'shorte': {
            name: 'Shorte.st',
            pattern: /shorte\.st/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        },
        'ouo': {
            name: 'Ouo.io',
            pattern: /ouo\.io|ouo\.press/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        },
        'shrinkme': {
            name: 'ShrinkMe',
            pattern: /shrinkme\.io/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        },
        'sub2unlock': {
            name: 'Sub2Unlock',
            pattern: /sub2unlock\.com|sub2unlock\.net/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        },
        'boost': {
            name: 'Boost.ink',
            pattern: /boost\.ink/,
            bypass: (url) => `https://bypass.vip/bypass?url=${encodeURIComponent(url)}`
        }
    };

    // Theme system
    const ThemeManager = {
        current: Storage.get('theme', 'dark'),

        apply(theme = this.current) {
            const themes = {
                dark: {
                    primary: '#1a1a1a',
                    secondary: '#2d2d2d',
                    accent: '#4a9eff',
                    text: '#ffffff',
                    border: '#404040'
                },
                light: {
                    primary: '#ffffff',
                    secondary: '#f5f5f5',
                    accent: '#2196f3',
                    text: '#333333',
                    border: '#e0e0e0'
                },
                blue: {
                    primary: '#0d1421',
                    secondary: '#1e2835',
                    accent: '#00bcd4',
                    text: '#ffffff',
                    border: '#2d3f54'
                }
            };

            const colors = themes[theme];
            if (colors) {
                Object.entries(colors).forEach(([key, value]) => {
                    document.documentElement.style.setProperty(`--easx-${key}`, value);
                });
                this.current = theme;
                Storage.set('theme', theme);
            }
        }
    };

    // UI Manager
    class UIManager {
        constructor() {
            this.container = null;
            this.isVisible = false;
            this.position = Storage.get('position', { x: 20, y: 20 });

            this.createStyles();
            this.createUI();
            this.bindEvents();
            Utils.log('UI initialized');
        }

        createStyles() {
            const css = `
                :root {
                    --easx-primary: #1a1a1a;
                    --easx-secondary: #2d2d2d;
                    --easx-accent: #4a9eff;
                    --easx-text: #ffffff;
                    --easx-border: #404040;
                }

                .easx-container {
                    position: fixed;
                    top: ${this.position.y}px;
                    left: ${this.position.x}px;
                    z-index: 999999;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    background: var(--easx-primary);
                    border: 1px solid var(--easx-border);
                    border-radius: 12px;
                    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                    min-width: 320px;
                    max-width: 90vw;
                    opacity: 0;
                    transform: translateY(-20px);
                    transition: all 0.3s ease;
                    overflow: hidden;
                }

                .easx-container.visible {
                    opacity: 1;
                    transform: translateY(0);
                }

                .easx-header {
                    background: linear-gradient(135deg, var(--easx-accent), #6366f1);
                    padding: 16px;
                    cursor: move;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    user-select: none;
                }

                .easx-title {
                    color: white;
                    font-size: 16px;
                    font-weight: 600;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .easx-logo {
                    width: 20px;
                    height: 20px;
                    background: white;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 12px;
                    font-weight: bold;
                    color: var(--easx-accent);
                }

                .easx-controls {
                    display: flex;
                    gap: 8px;
                }

                .easx-btn {
                    background: rgba(255,255,255,0.2);
                    border: none;
                    border-radius: 6px;
                    padding: 6px 8px;
                    color: white;
                    cursor: pointer;
                    transition: all 0.2s;
                    font-size: 12px;
                }

                .easx-btn:hover {
                    background: rgba(255,255,255,0.3);
                    transform: translateY(-1px);
                }

                .easx-content {
                    padding: 20px;
                }

                .easx-input-group {
                    margin-bottom: 16px;
                }

                .easx-label {
                    display: block;
                    color: var(--easx-text);
                    font-size: 14px;
                    font-weight: 500;
                    margin-bottom: 8px;
                }

                .easx-input {
                    width: 100%;
                    padding: 12px 16px;
                    background: var(--easx-secondary);
                    border: 1px solid var(--easx-border);
                    border-radius: 8px;
                    color: var(--easx-text);
                    font-size: 14px;
                    transition: all 0.2s;
                    box-sizing: border-box;
                }

                .easx-input:focus {
                    outline: none;
                    border-color: var(--easx-accent);
                    box-shadow: 0 0 0 3px rgba(74,158,255,0.1);
                }

                .easx-button {
                    width: 100%;
                    padding: 12px 20px;
                    background: linear-gradient(135deg, var(--easx-accent), #6366f1);
                    border: none;
                    border-radius: 8px;
                    color: white;
                    font-size: 14px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s;
                    margin-bottom: 12px;
                }

                .easx-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 16px rgba(74,158,255,0.3);
                }

                .easx-button.secondary {
                    background: var(--easx-secondary);
                    color: var(--easx-text);
                }

                .easx-settings {
                    border-top: 1px solid var(--easx-border);
                    padding: 16px 20px;
                    background: var(--easx-secondary);
                    display: none;
                }

                .easx-settings-row {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    margin-bottom: 12px;
                }

                .easx-select {
                    background: var(--easx-primary);
                    border: 1px solid var(--easx-border);
                    border-radius: 6px;
                    padding: 6px 12px;
                    color: var(--easx-text);
                    font-size: 12px;
                }

                .easx-fab {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    width: 56px;
                    height: 56px;
                    background: linear-gradient(135deg, var(--easx-accent), #6366f1);
                    border: none;
                    border-radius: 50%;
                    color: white;
                    cursor: pointer;
                    box-shadow: 0 4px 16px rgba(74,158,255,0.3);
                    transition: all 0.3s;
                    font-size: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 999998;
                }

                .easx-fab:hover {
                    transform: scale(1.1);
                }

                .easx-notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: var(--easx-primary);
                    border: 1px solid var(--easx-border);
                    border-radius: 8px;
                    padding: 16px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                    z-index: 1000000;
                    min-width: 280px;
                    max-width: 400px;
                    opacity: 0;
                    transform: translateX(100%);
                    transition: all 0.3s ease;
                    color: var(--easx-text);
                }

                .easx-notification.visible {
                    opacity: 1;
                    transform: translateX(0);
                }

                .easx-notification.success { border-left: 4px solid #4caf50; }
                .easx-notification.error { border-left: 4px solid #f44336; }
                .easx-notification.warning { border-left: 4px solid #ff9800; }

                @media (max-width: 768px) {
                    .easx-container {
                        position: fixed !important;
                        top: 50% !important;
                        left: 50% !important;
                        transform: translate(-50%, -50%) !important;
                        min-width: 300px;
                        max-width: calc(100vw - 40px);
                    }
                    .easx-container.visible {
                        transform: translate(-50%, -50%) !important;
                    }
                    .easx-fab {
                        bottom: 16px;
                        right: 16px;
                        width: 48px;
                        height: 48px;
                        font-size: 18px;
                    }
                }
            `;

            const style = document.createElement('style');
            style.textContent = css;
            document.head.appendChild(style);
        }

        createUI() {
            // Create FAB
            this.fab = document.createElement('button');
            this.fab.className = 'easx-fab';
            this.fab.innerHTML = '🔗';
            this.fab.title = 'EASx Bypass';
            document.body.appendChild(this.fab);

            // Create container
            this.container = document.createElement('div');
            this.container.className = 'easx-container';
            this.container.innerHTML = `
                <div class="easx-header">
                    <h3 class="easx-title">
                        <div class="easx-logo">E</div>
                        EASx Bypass
                    </h3>
                    <div class="easx-controls">
                        <button class="easx-btn" id="easx-settings">⚙️</button>
                        <button class="easx-btn" id="easx-close">✕</button>
                    </div>
                </div>
                <div class="easx-content">
                    <div class="easx-input-group">
                        <label class="easx-label">Enter URL to bypass:</label>
                        <input type="text" id="easx-url" class="easx-input" placeholder="https://example.com/link">
                    </div>
                    <button id="easx-bypass" class="easx-button">🚀 Bypass Link</button>
                    <button id="easx-detect" class="easx-button secondary">🔍 Auto-Detect</button>
                </div>
                <div class="easx-settings" id="easx-settings-panel">
                    <div class="easx-settings-row">
                        <span>Theme</span>
                        <select id="easx-theme" class="easx-select">
                            <option value="dark">Dark</option>
                            <option value="light">Light</option>
                            <option value="blue">Blue</option>
                        </select>
                    </div>
                </div>
            `;

            document.body.appendChild(this.container);
            document.getElementById('easx-theme').value = ThemeManager.current;
        }

        bindEvents() {
            // FAB
            this.fab.onclick = () => this.toggle();

            // Controls
            document.getElementById('easx-close').onclick = () => this.hide();
            document.getElementById('easx-settings').onclick = () => this.toggleSettings();

            // Actions
            document.getElementById('easx-bypass').onclick = () => this.bypassUrl();
            document.getElementById('easx-detect').onclick = () => this.autoDetect();

            // Settings
            document.getElementById('easx-theme').onchange = (e) => ThemeManager.apply(e.target.value);

            // Enter key
            document.getElementById('easx-url').onkeypress = (e) => {
                if (e.key === 'Enter') this.bypassUrl();
            };

            // ESC key
            document.onkeydown = (e) => {
                if (e.key === 'Escape' && this.isVisible) this.hide();
            };
        }

        show() {
            this.isVisible = true;
            setTimeout(() => this.container.classList.add('visible'), 10);
        }

        hide() {
            this.isVisible = false;
            this.container.classList.remove('visible');
        }

        toggle() {
            this.isVisible ? this.hide() : this.show();
        }

        toggleSettings() {
            const panel = document.getElementById('easx-settings-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }

        bypassUrl() {
            const input = document.getElementById('easx-url');
            const url = input.value.trim();

            if (!url) {
                this.notify('Please enter a URL', 'warning');
                return;
            }

            if (!Utils.isValidUrl(url)) {
                this.notify('Invalid URL format', 'error');
                return;
            }

            const service = this.findService(url);
            if (!service) {
                this.notify('Unsupported service', 'warning');
                return;
            }

            try {
                const bypassUrl = service.bypass(url);
                Utils.copyToClipboard(bypassUrl);
                this.notify(`Bypassed with ${service.name}! URL copied.`, 'success');

                if (confirm('Open bypassed URL?')) {
                    window.open(bypassUrl, '_blank');
                }
            } catch (error) {
                this.notify('Bypass failed', 'error');
            }
        }

        autoDetect() {
            const url = window.location.href;
            const service = this.findService(url);

            if (service) {
                document.getElementById('easx-url').value = url;
                this.notify(`${service.name} detected!`, 'success');
                this.bypassUrl();
            } else {
                this.notify('No supported service detected', 'warning');
            }
        }

        findService(url) {
            return Object.values(BYPASS_SERVICES).find(service => service.pattern.test(url));
        }

        notify(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `easx-notification ${type}`;
            notification.textContent = message;

            document.body.appendChild(notification);
            setTimeout(() => notification.classList.add('visible'), 10);

            setTimeout(() => {
                notification.classList.remove('visible');
                setTimeout(() => notification.remove(), 300);
            }, CONFIG.autoClose);
        }
    }

    // Auto-bypass
    class AutoBypass {
        constructor() {
            this.enabled = Storage.get('autoBypass', false);
            if (this.enabled) this.check();
        }

        check() {
            const url = window.location.href;
            const service = Object.values(BYPASS_SERVICES).find(s => s.pattern.test(url));

            if (service) {
                setTimeout(() => {
                    window.location.href = service.bypass(url);
                }, 2000);
            }
        }
    }

    // Initialize
    function init() {
        ThemeManager.apply();
        new UIManager();
        new AutoBypass();
        Utils.log('EASx Bypass loaded');
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

})();
